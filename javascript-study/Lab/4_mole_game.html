<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Whack-a-Mole</title>
  <style>
    .board {
      display: grid;
      grid-template-columns: repeat(3, 100px);
      gap: 10px;
      margin-bottom: 10px;
    }
    .cell {
      width: 100px;
      height: 100px;
      background: #ddd;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 40px;
      cursor: pointer;
    }
    .mole {
      background: gold;
    }
  </style>
</head>
<body>

<h2>ë‘ë”ì§€ ì¡ê¸° ê²Œì„</h2>
<div>ì ìˆ˜: <span id="score">0</span></div>
<button id="startBtn">ê²Œì„ ì‹œì‘</button>

<div class="board" id="board"></div>

<script>
  const board = document.getElementById("board");
  const scoreEl = document.getElementById("score");
  const startBtn = document.getElementById("startBtn");

  let score = 0;
  let timer = null;
  let currentIndex = -1;

  // 1. ë³´ë“œ ìƒì„± (DOM Create)
  for (let i = 0; i < 9; i++) {
    const div = document.createElement("div");
    div.className = "cell";
    div.dataset.index = i;
    board.appendChild(div);
  }

  // ë³´ë“œ ìƒì„± í›„ cell ê°€ì ¸ì˜¤ê¸°
  const cells = document.querySelectorAll(".cell");

  // 2. ëœë¤ ë‘ë”ì§€ ë“±ì¥
  function showMole() {
    // ëª¨ë“  ì…€ì—ì„œ ë‘ë”ì§€ ì œê±°
    cells.forEach((c) => {
      c.classList.remove("mole");
      c.textContent = "";
    });

    // ëœë¤ ì¸ë±ìŠ¤ ë½‘ê¸°
    const rand = Math.floor(Math.random() * cells.length);

    // ëœë¤ ì…€ì— ë‘ë”ì§€ í‘œì‹œ
    cells[rand].classList.add("mole");
    cells[rand].textContent = "ğŸ¹";

    // í˜„ì¬ ìœ„ì¹˜ ì €ì¥
    currentIndex = rand;
  }

  // 3. í´ë¦­ ì´ë²¤íŠ¸ ì²˜ë¦¬
  cells.forEach((cell) => {
    // ê° ì…€ì— í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
    cell.addEventListener("click", () => {
      // í´ë¦­í•œ ì…€ì˜ ì¸ë±ìŠ¤ê°€ í˜„ì¬ ë‘ë”ì§€ ìœ„ì¹˜ì™€ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸
      if (Number(cell.dataset.index) === currentIndex) {
        // ì ìˆ˜ ì¦ê°€
        score++;
        scoreEl.textContent = score;
      }
    });
  });

  // 4. ê²Œì„ ì‹œì‘ ë²„íŠ¼
  startBtn.addEventListener("click", () => {
    // ì´ë¯¸ ê²Œì„ì´ ì§„í–‰ ì¤‘ì´ë©´ ì¢…ë£Œ
    if (timer) return;

    // ì ìˆ˜ ì´ˆê¸°í™”
    score = 0;
    scoreEl.textContent = score;

    // 0.8ì´ˆë§ˆë‹¤ ë‘ë”ì§€ ë“±ì¥
    timer = setInterval(showMole, 800);

    // 10ì´ˆ í›„ ê²Œì„ ì¢…ë£Œ
    setTimeout(() => {
      clearInterval(timer);
      timer = null;
      alert("ê²Œì„ ì¢…ë£Œ! ì ìˆ˜: " + score);
    }, 10000);
  });
</script>

</body>
</html>
